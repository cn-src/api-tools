(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{938:function(e,t,o){"use strict";o.r(t);o(26),o(17),o(25),o(24),o(22),o(23),o(100),o(9),o(61),o(29),o(42),o(15),o(6),o(28);var r=o(12),n=o(242);function l(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(o);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return c(e,t)}(e))){var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r,n=!0,l=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return n=e.done,e},e:function(e){l=!0,r=e},f:function(){try{n||null==o.return||o.return()}finally{if(l)throw r}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}var d={data:function(){return{fb:n.a}},props:{show:Boolean},components:{modal:function(){return o.e(0).then(o.bind(null,945))}},computed:{collectionJson:function(){return JSON.stringify(this.$store.state.postwoman.collections,null,2)}},methods:{hideModal:function(){this.$emit("hide-modal")},openDialogChooseFileToReplaceWith:function(){this.$refs.inputChooseFileToReplaceWith.click()},openDialogChooseFileToImportFrom:function(){this.$refs.inputChooseFileToImportFrom.click()},replaceWithJSON:function(){var e=this,t=new FileReader;t.onload=function(t){var content=t.target.result,o=JSON.parse(content);if(o[0]){var n=Object.keys(o[0]),l=Object(r.a)(n,3);l[0],l[1],l[2]}else{if(!o.info||!o.info.schema.includes("v2.1.0"))return e.failedImport();o=e.parsePostmanCollection(o)}e.$store.commit("postwoman/importCollections",o),e.fileImported()},t.readAsText(this.$refs.inputChooseFileToReplaceWith.files[0])},importFromJSON:function(){var e=this,t=new FileReader;t.onload=function(t){var content=t.target.result,o=JSON.parse(content);if(o[0]){var n=Object.keys(o[0]),l=Object(r.a)(n,3);l[0],l[1],l[2]}else{if(!o.info||!o.info.schema.includes("v2.1.0"))return e.failedImport();o=e.parsePostmanCollection(o)}e.$store.commit("postwoman/importCollections",o),e.fileImported()},t.readAsText(this.$refs.inputChooseFileToImportFrom.files[0])},exportJSON:function(){var text=this.collectionJson;text=text.replace(/\n/g,"\r\n");var e=new Blob([text],{type:"text/json"}),t=document.createElement("a");t.download="postwoman-collection.json",t.href=window.URL.createObjectURL(e),t.target="_blank",t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),this.$toast.success(this.$t("download_started"),{icon:"done"})},syncCollections:function(){this.$store.commit("postwoman/replaceCollections",n.a.currentCollections),this.fileImported()},fileImported:function(){this.$toast.info(this.$t("file_imported"),{icon:"folder_shared"})},failedImport:function(){this.$toast.error(this.$t("import_failed"),{icon:"error"})},parsePostmanCollection:function(e){var t,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=o?[{name:"",folders:[],requests:[]}]:{name:"",requests:[]},n=l(e.item);try{for(n.s();!(t=n.n()).done;){var c=t.value;c.request?r[0]?(r[0].name=e.info?e.info.name:"",r[0].requests.push(this.parsePostmanRequest(c))):(r.name=e.name?e.name:"",r.requests.push(this.parsePostmanRequest(c))):c.item&&c.item[0]&&r[0].folders.push(this.parsePostmanCollection(c,!1))}}catch(e){n.e(e)}finally{n.f()}return r},parsePostmanRequest:function(e){var t={url:"",path:"",method:"",auth:"",httpUser:"",httpPassword:"",passwordFieldType:"password",bearerToken:"",headers:[],params:[],bodyParams:[],rawParams:"",rawInput:!1,contentType:"",requestType:"",name:""};t.name=e.name;var o=e.request.url.raw.match(/^(.+:\/\/[^\/]+|{[^\/]+})(\/[^\?]+|).*$/);o&&(t.url=o[1],t.path=o[2]?o[2]:""),t.method=e.request.method;var r=e.request.auth?e.request.auth:"",n=r?r.type:"";"basic"===n?(t.auth="Basic Auth",t.httpUser="username"===r.basic[0].key?r.basic[0].value:r.basic[1].value,t.httpPassword="password"===r.basic[0].key?r.basic[0].value:r.basic[1].value):"oauth2"===n?(t.auth="OAuth 2.0",t.bearerToken="accessToken"===r.oauth2[0].key?r.oauth2[0].value:r.oauth2[1].value):"bearer"===n&&(t.auth="Bearer Token",t.bearerToken=r.bearer[0].value);var c=e.request.header;if(c){t.headers=c;var d,m=l(t.headers);try{for(m.s();!(d=m.n()).done;){var header=d.value;delete header.name,delete header.type}}catch(e){m.e(e)}finally{m.f()}}var f=e.request.url.query;if(f){t.params=f;var h,v=l(t.params);try{for(v.s();!(h=v.n()).done;){delete h.value.disabled}}catch(e){v.e(e)}finally{v.f()}}if(e.request.body)if("urlencoded"===e.request.body.mode){var y=e.request.body.urlencoded;t.bodyParams=y||[];var _,w=l(t.bodyParams);try{for(w.s();!(_=w.n()).done;){delete _.value.type}}catch(e){w.e(e)}finally{w.f()}}else"raw"===e.request.body.mode&&(t.rawInput=!0,t.rawParams=e.request.body.raw);return t}}},m=o(41),component=Object(m.a)(d,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.show?o("modal",{on:{close:e.hideModal}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("ul",[o("li",[o("div",{staticClass:"flex-wrap"},[o("h3",{staticClass:"title"},[e._v(e._s(e.$t("import_export"))+" "+e._s(e.$t("collections")))]),e._v(" "),o("div",[o("button",{staticClass:"icon",on:{click:e.hideModal}},[o("i",{staticClass:"material-icons"},[e._v("close")])])])]),e._v(" "),o("div",{staticClass:"flex-wrap"},[o("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.fb.currentUser?e.$t("replace_current"):e.$t("login_first")},expression:"{\n              content: !fb.currentUser ? $t('login_first') : $t('replace_current'),\n            }"}]},[o("button",{staticClass:"icon",attrs:{disabled:!e.fb.currentUser},on:{click:e.syncCollections}},[o("i",{staticClass:"material-icons"},[e._v("folder_shared")]),e._v(" "),o("span",[e._v(e._s(e.$t("import_from_sync")))])])]),e._v(" "),o("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("replace_current"),expression:"$t('replace_current')"}],staticClass:"icon",on:{click:e.openDialogChooseFileToReplaceWith}},[o("i",{staticClass:"material-icons"},[e._v("create_new_folder")]),e._v(" "),o("span",[e._v(e._s(e.$t("replace_json")))]),e._v(" "),o("input",{ref:"inputChooseFileToReplaceWith",staticStyle:{display:"none"},attrs:{type:"file",accept:"application/json"},on:{change:e.replaceWithJSON}})]),e._v(" "),o("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("preserve_current"),expression:"$t('preserve_current')"}],staticClass:"icon",on:{click:e.openDialogChooseFileToImportFrom}},[o("i",{staticClass:"material-icons"},[e._v("folder_special")]),e._v(" "),o("span",[e._v(e._s(e.$t("import_json")))]),e._v(" "),o("input",{ref:"inputChooseFileToImportFrom",staticStyle:{display:"none"},attrs:{type:"file",accept:"application/json"},on:{change:e.importFromJSON}})])])])])]),e._v(" "),o("div",{attrs:{slot:"body"},slot:"body"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.collectionJson,expression:"collectionJson"}],attrs:{rows:"8"},domProps:{value:e.collectionJson},on:{input:function(t){t.target.composing||(e.collectionJson=t.target.value)}}})]),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("div",{staticClass:"flex-wrap"},[o("span"),e._v(" "),o("span",[o("button",{staticClass:"icon",on:{click:e.hideModal}},[e._v("\n          "+e._s(e.$t("cancel"))+"\n        ")]),e._v(" "),o("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("download_file"),expression:"$t('download_file')"}],staticClass:"icon primary",on:{click:e.exportJSON}},[e._v("\n          "+e._s(e.$t("export"))+"\n        ")])])])])]):e._e()}),[],!1,null,null,null);t.default=component.exports}}]);